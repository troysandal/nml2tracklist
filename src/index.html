<!DOCTYPE html>
<html>

<head>
    <title>Convert NML To Tracklist</title>
    <link rel="manifest" href="/manifest.json">
    <meta charset="utf-8">
    <style>
        textarea {
            width: 800px;
            height: 300px;
        }
        #formatString {
            width:600px;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="index.js"></script>
</head>

<body>
    <h1>Traktor NML to Text</h1>
    <p>You can use this tool to turn a Traktor NML file into a human readable
        format that's postable to MixCloud, SoundCloud or wherever you want to
        give people the list of tracks in your set.  Enjoy.
    </p>
    <h2>NML</h2>
    <p>Paste in your NML file below or press this button to upload a file: 
        <input text="Import" type="file" accept=".nml" id="nmlFile">
    </p>
    <textarea id="nml"></textarea>
    <div>
        <p>Track Format String:
            <input type="text" id="formatString" value="${INDEX}. ${TITLE} by ${ARTIST}" />
        </p>
        <p id="fieldList">Available Fields: </p>
    </div>
    <h2>Your Tracklist</h2>
    <!-- <p><button onclick="copyToClipboard()">Copy To Clipboard</button></p> -->
    <pre id="trackList">No tracks found</pre>
    <script>
        document.getElementById('nmlFile').addEventListener("change", upload, false)
        document.getElementById('formatString').addEventListener("input", convert, false)
        document.getElementById('nml').addEventListener("input", convert, false)

        const fieldList = Object.keys(TRACK_FIELDS)
            .map((fieldName) => `\${${fieldName}}`)
            .join(' ')
        document.getElementById('fieldList').textContent =
        document.getElementById('fieldList').textContent + fieldList
    </script>
</body>

</html>